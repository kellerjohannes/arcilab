(sys:load "/home/johannes/Coding/extempore/arcilab/parser-old/xml-parser.xtm")
(sys:load "/home/johannes/Coding/extempore/arcilab/parser-old/arciorgano-comm.xtm")

(bind-func convert
  (let ((workpath (Str "/home/johannes/Coding/extempore/arcilab/parser-old/labor01/")))
    (lambda (filename:String*)
      (read_music_xml2 0 (cat2 workpath (cat2 filename (Str ".xml")))
                         (cat2 workpath (cat2 filename (Str ".xtm"))))
      (printf "file '%s' read.\n\n" (cstring filename))
      void)))

($ (convert (Str "1_3Komma/Arciorgano_Aufnahmen_1_3_Komma")))
($ (convert (Str "1_3Komma/vicentino_dolce1_3_Komma")))
($ (convert (Str "1_3Komma/vicentino_musica_1_3_Komma")))
($ (convert (Str "1_3Komma/vicentino_soave_modern_1_3Komma_lang")))
($ (convert (Str "1_3Komma/vicentino_soave_modern_1_3Komma_verkuerzt")))
($ (convert (Str "1_3Komma/Clusterglissandi/Arciorgano_Aufnahmen_Clustergissandi_ab_breit")))
($ (convert (Str "1_3Komma/Clusterglissandi/Arciorgano_Aufnahmen_Clustergissandi_Gitbi")))
($ (convert (Str "1_3Komma/Clusterglissandi/Arciorgano_Aufnahmen_Clustergissandi_Sinusnachbildung")))
($ (convert (Str "1_3Komma/Clusterglissandi/Arciorgano_Aufnahmen_Clustergissandi")))
($ (convert (Str "1_3Komma/Clusterglissandi/Arciorgano_Aufnahmen_Helmholtz-Fahrrad")))
($ (convert (Str "1_3Komma/Clusterglissandi/Arciorgano_Aufnahmen_Helmholtz-Fahrrad3_besser")))
($ (convert (Str "1_3Komma/Clusterglissandi/Arciorgano_Aufnahmen_Helmholtz-Fahrrad3")))
($ (convert (Str "1_4Komma/Arciorgano_Aufnahmen_1_4_Komma")))
($ (convert (Str "1_4Komma/Arciorgano_Aufnahmen_Helmholtz-Fahrrad2")))
($ (convert (Str "1_4Komma/Spekulative_Intonationspraxis2_1_4Komma_nicht_transp")))


($ (convert (Str "1_4Komma/spek-int-2-4")))



(bind-func compile_all
  (lambda ()
    (let ((i 0)
          (workpath (Str "/home/johannes/Coding/extempore/arcilab/parser-old/labor01/"))
          (filelist:String** (alloc 30)))
      (pset! filelist 0 (Str "aufnahmen_3komma"))
      (pset! filelist 1 (Str "aufnahmen_4komma"))
      (pset! filelist 2 (Str "clusterglissandi_3komma"))
      (pset! filelist 3 (Str "dolce1_3Komma"))
      (pset! filelist 4 (Str "fahrrad2_4komma"))
      (pset! filelist 5 (Str "fahrrad3_3komma"))
      (pset! filelist 6 (Str "fahrrad3besser_3komma"))
      (pset! filelist 7 (Str "fahrrad_3komma"))
      (pset! filelist 8 (Str "intonationspraxis2_3komma"))
      (pset! filelist 9 (Str "intonationspraxis2_4komma"))
      (pset! filelist 10 (Str "musica1_3komma"))
      (pset! filelist 11 (Str "soave1_3komma"))
      (dotimes (i 12)
        (printf "reading file %s ...\n" (cstring (cat2 workpath (cat2 (pref filelist i) (Str ".xml")))))
        (read_music_xml2 0 (cat2 workpath (cat2 (pref filelist i) (Str ".xml")))
                           (cat2 workpath (cat2 (pref filelist i) (Str ".xtm"))))
        (printf "ok.\n")))))

($ (compile_all))
